<!DOCTYPE html>
<html lang="en"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:ui="http://java.sun.com/jsf/facelets" > 

	<h:head>
		<title>hello #{userBean.user.username}</title>
		<h:outputStylesheet library="css" name="style.css" />
	</h:head>
	<h:body >
 
		<ui:insert name="header" >
			<ui:include src="user-header.xhtml" />
		</ui:insert>
		<!-- Shtimi i nje pyetjeje nga useri -->
		<h:form class="forma">
		
			<table >
				<tr>
					<p:messages autoUpdate="true" />
					<td><p:outputLabel for="car" value="Category: " /></td>
					<td><p:selectOneMenu id="car" required="true" value="#{categoryBean.id}"  valueChangeListener="true" requiredMessage="*required">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItems value="#{categoryBean.categories}" var="category" itemLabel="#{category.name}" itemValue="#{category.id}"/>
						</p:selectOneMenu>  
					</td>
					<td colspan="2"><h:message for="question" styleClass="error" /></td>
				</tr>
				<tr>     
					<td><label >Question</label></td>
					<td> <h:inputText id="question" required="true" value="#{questionBean.question.name}" requiredMessage="*required" /> </td>
					<td colspan="2"><h:message for="question" styleClass="error" /></td>
				</tr>
				<tr>
					<td><label >Answer</label></td>
					<td> <h:inputText id="answer" required="true" value="#{questionBean.answer.true1}"  requiredMessage="*required"  /> </td>
					<td colspan="2"><h:message for="answer" styleClass="error" /></td>
				</tr>
				<tr>
					<td><label >Answer</label></td>
					<td> <h:inputText id="answer1" required="true" value="#{questionBean.answer.false1}" requiredMessage="*required" p:placeHolder="Correct answer here"  style="height:70%" /> </td>
					<td colspan="2"><h:message for="answer1" styleClass="error" /></td>
				</tr>
				<tr>
					<td><label >Answer</label></td>
					<td> <h:inputText id="answer2" required="true" value="#{questionBean.answer.false2}"  requiredMessage="*required" p:placeHolder="Correct answer here"  style="height:70%" /> </td>
					<td colspan="2"><h:message for="answer2" styleClass="error" /></td>
				</tr>
				<tr>
					<td><label >Answer</label></td>
					<td> <h:inputText id="answer3" required="true" value="#{questionBean.answer.false3}"  requiredMessage="*required" p:placeHolder="Correct answer here"  style="height:70%" /> </td>
					<td colspan="2"><h:message for="answer3" styleClass="error" /></td>
				</tr>
				<tr>
					<td></td>
					<td> <p:commandButton value="add" actionListener="#{questionBean.add}" process="@this @form" update="j_idt64:j_idt65 @form"/>  </td>  
				</tr>
			</table>
				<p:watermark value="Your question" for="question"  />
				<p:watermark value="Correct answer" for="answer"  />
				<p:watermark value="wrong answer" for="answer1"  />
				<p:watermark value="wrong answer" for="answer2"  />
			    <p:watermark value="wrong answer" for="answer3"  />

		</h:form>
		
			
		<h:form >
		<!--Listimi i te gjitha pyetjeve te userit -->
			<p:accordionPanel >
				<p:tab title="Your Questions">
					<p:dataTable  id="questionTable" var="question" value="#{questionBean.questions}" >
						<p:column headerText="Description">
							<h:outputText value="#{question.name}"/>
						</p:column>   
						<p:column headerText="Category" >
							<h:outputText value="#{question.category.name}" />
						</p:column> 
						<p:column headerText="Action" >    
							<p:commandLink value= "Update" ajax="false" process="@this" action="#{questionBean.select(question.id)}" /> 
							<p:growl id="message" showDetail="true" > </p:growl>
							<p:commandLink value= "Delete" ajax="false" process="@this" action="#{questionBean.delete(question.id)}" >
								<p:confirm message="Are you sure you want to delete it? " header="Confirmation" icon="ui-icon-alert" />
							</p:commandLink>
							<p:confirmDialog global="true" showEffect="fade" hidEffect="fade"  update="@form">
								<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
								<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
							</p:confirmDialog>
						</p:column>   
					</p:dataTable>
				</p:tab>   
			</p:accordionPanel>
			
		</h:form>	
		
	</h:body>

</html>		